(function(){$(function(){"use strict";var e,a,t,n,i,s,o,r,d,l,u;return l=!/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(window.navigator.userAgent),d=navigator.userAgent.match("CriOS"),$.fn.imgResize=function(e){var a,t,n,i,s,o,r,d,l,u,c,h;return e=$.extend({parent:$(this).parent()},e),d=$(e.parent).width(),r=$(e.parent).height(),t=$(this),o=t.width(),n=t.height(),u=d/o,l=r/n,a=Math.max(u,l),h=Math.floor(o*a),c=Math.floor(n*a),s=Math.floor((c-r)/-2),i=Math.floor((h-d)/-2),t.css({width:h,height:c,top:s,left:i})},$.fn.boxResize=function(e){var a,t,n,i;return e=$.extend({parent:$(this).parent(),scaleWidth:1,scaleHeight:1},e),t=$(e.parent).width(),a=$(e.parent).height(),i=e.scaleWidth,n=e.scaleHeight,$(this).css({width:t*i,height:a*n})},e=function(){return $("#js-backtop").click(function(){return $("html, body").stop().animate({scrollTop:0},1e3,"swing")})},u=function(){var e;return e=$("#js-progressbar"),l&&$.preload({forward:$.pjax.follow,check:$.pjax.getCache,encode:!0,ajax:{done:function(e,a,t){return!$.pjax.getCache(this.url&&$.pjax.setCache(this.url,null,a,t))}}}),$.pjax({area:"#js-pjaxArea",wait:0,load:{head:"base, meta, link"},cache:{click:!0,submit:!1,popstate:!0},server:{query:null},speedcheck:!0,fallback:!0,ajax:{timeout:1e4},callbacks:{update:{content:{after:function(){return e.css({width:"70%"})}},css:{after:function(){return e.css({width:"80%"})}},script:{after:function(){return e.css({width:"90%"})}}}}}),$(document).on("pjax:fetch",function(){return e.removeClass("is-hidden").css({width:"20%"})}),$(window).on("pjax:unload",function(){return e.css({width:"40%"}),$(window).off("load"),$(window).off("resize"),$(document).off("imagesLoades",$("#js-mainvisual-image"))}),$(document).on("pjax:DOMContentLoaded",function(){var e;return e=$("#js-pjaxArea").attr("data-pageclass"),$("body").removeClass().addClass(e),null!==document.getElementById("js-mainvisual")&&$("body").hasClass("page-index")?$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}):void 0}),$(document).on("pjax:ready",function(){return $(document).trigger("preload")}),$(document).on("pjax:render",function(){var i;return e.css({width:"100%"}),setTimeout(function(){return e.addClass("is-hidden")},300),$("body").hasClass("page-single")&&(a(),$(".share-twitter > *").replaceWith('<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja" data-url="'+encodeURI(location.href)+'" data-text="'+document.title+'" data-via="ryo_dg" data-lang="ja" data-related="ryo_dg">ツイート</a>'),$(".share-facebook > *").replaceWith('<div class="fb-like" data-href="'+encodeURI(location.href)+'" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>'),$(".share-gplus > *").replaceWith('<div class="g-plusone" data-size="medium" data-href="'+encodeURI(location.href)+'"></div>'),$(".share-hatena > *").replaceWith('<a href="http://b.hatena.ne.jp/entry/'+encodeURI(location.href)+'" class="hatena-bookmark-button" data-hatena-bookmark-title="'+document.title+'" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>'),gapi.plusone.go(),twttr.widgets.load(),FB.XFBML.parse(),Hatena.Bookmark.BookmarkButton.setup()),$(window).on("resize",function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),o()):t()}),null!==document.getElementById("js-mainvisual")?(i=$("#js-mainvisual-image").find("img"),d&&(i.attr("src",i.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),$("#js-mainvisual-image").imagesLoaded().done(function(){return o(),n()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return t(),n()})):void 0}),$(window).on("pjax:load",function(){})},i=function(){var e;return e=e=l?"click":"touchstart",$("#js-navigation-toggle").on(e,function(){return $("body").toggleClass("is-nav-open")}),$("#js-navigation a").on("click",function(){return $("body").removeClass("is-nav-open")}),$("#js-overlay").on(e,function(){return $("body").hasClass("is-nav-open")?$("body").removeClass("is-nav-open"):void 0})},t=function(){return $("#js-mainvisual-image img").imgResize()},n=function(){return $("#js-mainvisual-image").removeClass("is-hidden"),$("#js-mainvisual-text").delay(1e3).queue(function(){return $(this).removeClass("is-hidden").dequeue()}),$("#js-mainvisual").addClass("is-loaded")},a=function(){return $("pre").addClass("prettyprint"),prettyPrint()},r=function(){return $("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1})},o=function(){return $("#js-mainvisual-image img").imgResize()},u(),e(),i(),a(),null!==document.getElementById("js-mainvisual")&&($("body").hasClass("page-index")||$("body").hasClass("single-works"))&&$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}),null!==document.getElementById("js-mainvisual")&&(s=$("#js-mainvisual-image").find("img"),d&&(s.attr("src",s.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),$("#js-mainvisual-image").imagesLoaded().done(function(){return o(),n()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return t(),n()})),null!==document.getElementById("js-mainvisual")?$(window).on("resize",function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),o()):t()}):void 0})}).call(this);