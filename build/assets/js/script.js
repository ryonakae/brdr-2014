(function(){var e=[].indexOf||function(e){for(var a=0,t=this.length;t>a;a++)if(a in this&&this[a]===e)return a;return-1};$(function(){"use strict";var a,t,n,i,s,o,r,d,l,u,c;return u=!/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(window.navigator.userAgent),l=navigator.userAgent.match("CriOS"),$.fn.imgResize=function(e){var a,t,n,i,s,o,r,d,l,u,c,h;return e=$.extend({parent:$(this).parent()},e),d=$(e.parent).width(),r=$(e.parent).height(),t=$(this),o=t.width(),n=t.height(),u=d/o,l=r/n,a=Math.max(u,l),h=Math.floor(o*a),c=Math.floor(n*a),s=Math.floor((c-r)/-2),i=Math.floor((h-d)/-2),t.css({width:h,height:c,top:s,left:i})},$.fn.boxResize=function(e){var a,t,n,i;return e=$.extend({parent:$(this).parent(),scaleWidth:1,scaleHeight:1},e),t=$(e.parent).width(),a=$(e.parent).height(),i=e.scaleWidth,n=e.scaleHeight,$(this).css({width:t*i,height:a*n})},a=function(){return $("#js-backtop").click(function(){return $("html, body").stop().animate({scrollTop:0},1e3,"swing")})},c=function(){var a;return a=$("#js-progressbar"),u&&$.preload({forward:$.pjax.follow,check:$.pjax.getCache,encode:!0,ajax:{xhr:function(){var t;return t=$.ajaxSettings.xhr(),t instanceof Object&&e.call(t,"onprogress")>=0&&(t.addEventListener("progress",function(e){var t,t=e.total?e.loaded/e.total:.4;return t=90*t+5,a.css({width:t+"%"})},!1),t.addEventListener("load",function(){return a.css({width:"95%"})},!1),t.addEventListener("error",function(){return a.css({"background-color":"#00f"})},!1)),t},success:function(e,a,t){return!$.pjax.getCache(this.url)&&$.pjax.setCache(this.url,null,a,t)},done:function(e,a,t){return!$.pjax.getCache(this.url)&&$.pjax.setCache(this.url,null,a,t)}}}),$.pjax({area:"#js-pjaxArea",wait:0,load:{head:"base, meta, link"},cache:{click:!0,submit:!1,popstate:!0},server:{query:null},speedcheck:!0,fallback:!1,ajax:{timeout:1e4},callbacks:{update:{content:{after:function(){return a.css({width:"40%"})}},css:{after:function(){return a.css({width:"60%"})}},script:{after:function(){return a.css({width:"80%"})}}}}}),$(document).on("pjax:fetch",function(){return a.css({width:""}),a.removeClass("is-hidden")}),$(window).on("pjax:unload",function(){return $(window).off("load"),$(window).off("resize"),$(document).off("imagesLoades",$("#js-mainvisual-image"))}),$(document).on("pjax:DOMContentLoaded",function(){var e;return e=$("#js-pjaxArea").attr("data-pageclass"),$("body").removeClass().addClass(e),null!==document.getElementById("js-mainvisual")&&$("body").hasClass("page-index")?$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}):void 0}),$(document).on("pjax:ready",function(){return $(document).trigger("preload")}),$(document).on("pjax:render",function(){var e;return $("body").hasClass("page-single")&&(t(),$(".share-twitter > *").replaceWith('<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja" data-url="'+encodeURI(location.href)+'" data-text="'+document.title+'" data-via="ryo_dg" data-lang="ja" data-related="ryo_dg">ツイート</a>'),$(".share-facebook > *").replaceWith('<div class="fb-like" data-href="'+encodeURI(location.href)+'" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>'),$(".share-gplus > *").replaceWith('<div class="g-plusone" data-size="medium" data-href="'+encodeURI(location.href)+'"></div>'),$(".share-hatena > *").replaceWith('<a href="http://b.hatena.ne.jp/entry/'+encodeURI(location.href)+'" class="hatena-bookmark-button" data-hatena-bookmark-title="'+document.title+'" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>'),gapi.plusone.go(),twttr.widgets.load(),FB.XFBML.parse(),Hatena.Bookmark.BookmarkButton.setup()),a.css({width:"100%"}),setTimeout(function(){return a.addClass("is-hidden")},300),$(window).on("resize",function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(d(),r()):n()}),null!==document.getElementById("js-mainvisual")?(e=$("#js-mainvisual-image").find("img"),l&&(e.attr("src",e.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(d(),$("#js-mainvisual-image").imagesLoaded().done(function(){return r(),i()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return n(),i()})):void 0}),$(window).on("pjax:load",function(){})},s=function(){var e;return e=e=u?"click":"touchstart",$("#js-navigation-toggle").on(e,function(){return $("body").toggleClass("is-nav-open")}),$("#js-navigation a").on("click",function(){return $("body").removeClass("is-nav-open")}),$("#js-overlay").on(e,function(){return $("body").hasClass("is-nav-open")?$("body").removeClass("is-nav-open"):void 0})},n=function(){return $("#js-mainvisual-image img").imgResize()},i=function(){return $("#js-mainvisual-image").removeClass("is-hidden"),$("#js-mainvisual-text").delay(1e3).queue(function(){return $(this).removeClass("is-hidden").dequeue()}),$("#js-mainvisual").addClass("is-loaded")},t=function(){return $("pre").addClass("prettyprint"),prettyPrint()},d=function(){return $("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1})},r=function(){return $("#js-mainvisual-image img").imgResize()},c(),a(),s(),t(),null!==document.getElementById("js-mainvisual")&&($("body").hasClass("page-index")||$("body").hasClass("single-works"))&&$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}),null!==document.getElementById("js-mainvisual")&&(o=$("#js-mainvisual-image").find("img"),l&&(o.attr("src",o.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(d(),$("#js-mainvisual-image").imagesLoaded().done(function(){return r(),i()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return n(),i()})),null!==document.getElementById("js-mainvisual")?$(window).on("resize",function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(d(),r()):n()}):void 0})}).call(this);