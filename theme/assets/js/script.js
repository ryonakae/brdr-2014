(function(){$(function(){"use strict";var e,n,a,i,t,s,o,r,u,l,d=!/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(window.navigator.userAgent),c=navigator.userAgent.match("CriOS");if($.fn.imgResize=function(e){var n,a,i,t,s,o,r,u,l,d,c,m;return e=$.extend({parent:$(this).parent()},e),u=$(e.parent).width(),r=$(e.parent).height(),d=u/(o=(a=$(this)).width()),l=r/(i=a.height()),n=Math.max(d,l),m=Math.floor(o*n),c=Math.floor(i*n),s=Math.floor((c-r)/-2),t=Math.floor((m-u)/-2),a.css({width:m,height:c,top:s,left:t})},$.fn.boxResize=function(e){var n,a,i,t;return e=$.extend({parent:$(this).parent(),scaleWidth:1,scaleHeight:1},e),a=$(e.parent).width(),n=$(e.parent).height(),t=e.scaleWidth,i=e.scaleHeight,$(this).css({width:a*t,height:n*i})},n=function(){return $("#js-backtop").click(function(){return $("html, body").stop().animate({scrollTop:0},500,"swing")})},l=function(){return d&&$.preload({forward:$.pjax.follow,check:$.pjax.getCache,encode:!0,ajax:{success:function(e,n,a){return!$.pjax.getCache(this.url)&&$.pjax.setCache(this.url,null,n,a)}}}),$.pjax({area:"#js-pjaxArea",wait:0,load:{head:"base, meta, link"},cache:{click:!0,submit:!1,popstate:!0},server:{query:null},speedcheck:!0,fallback:!0,ajax:{timeout:5e3}}),$(document).on("pjax:fetch",function(){}),$(window).on("pjax:unload",function(){return $(window).off("load"),$(window).off("resize"),$(document).off("imagesLoades",$("#js-mainvisual-image"))}),$(document).on("pjax:DOMContentLoaded",function(){var e=$("#js-pjaxArea").attr("data-pageclass");if($("body").removeClass().addClass(e),null!==document.getElementById("js-mainvisual")&&$("body").hasClass("page-index"))return $("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1})}),$(document).on("pjax:ready",function(){return $(document).trigger("preload")}),$(document).on("pjax:render",function(){var e,n;if($("body").hasClass("page-single")&&a(),e=!1,$(window).on("resize",function(){return!1!==e&&clearTimeout(e),e=setTimeout(function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(u(),r()):i()},200)}),null!==document.getElementById("js-mainvisual"))return n=$("#js-mainvisual-image").find("img"),c&&(n.attr("src",n.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(u(),$("#js-mainvisual-image").imagesLoaded().done(function(e){return r(),t()})):$("#js-mainvisual-image").imagesLoaded().done(function(e){return i(),t()})}),$(window).on("pjax:load",function(){})},s=function(){var e=e=d?"click":"touchstart";return $("#js-navigation-toggle").on(e,function(){return $("body").toggleClass("is-nav-open")}),$("#js-navigation a").on("click",function(){return $("body").removeClass("is-nav-open")}),$("#js-overlay").on(e,function(){if($("body").hasClass("is-nav-open"))return $("body").removeClass("is-nav-open")})},i=function(){return $("#js-mainvisual-image img").imgResize()},t=function(){return $("#js-mainvisual-image").removeClass("is-hidden"),$("#js-mainvisual-text").delay(1e3).queue(function(){return $(this).removeClass("is-hidden").dequeue()}),$("#js-mainvisual").addClass("is-loaded")},a=function(){return $("pre").addClass("prettyprint"),prettyPrint()},u=function(){return $("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1})},r=function(){return $("#js-mainvisual-image img").imgResize()},l(),n(),s(),a(),null!==document.getElementById("js-mainvisual")&&($("body").hasClass("page-index")||$("body").hasClass("single-works"))&&$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}),null!==document.getElementById("js-mainvisual")&&(o=$("#js-mainvisual-image").find("img"),c&&(o.attr("src",o.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(u(),$("#js-mainvisual-image").imagesLoaded().done(function(e){return r(),t()})):$("#js-mainvisual-image").imagesLoaded().done(function(e){return i(),t()})),null!==document.getElementById("js-mainvisual"))return e=!1,$(window).on("resize",function(){return!1!==e&&clearTimeout(e),e=setTimeout(function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(u(),r()):i()},200)})})}).call(this);