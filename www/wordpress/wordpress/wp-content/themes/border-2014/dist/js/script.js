(function(){$(function(){"use strict";var e,n,a,t,i,s,o,r,u,d,l,c;return d=!/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(window.navigator.userAgent),u=navigator.userAgent.match("CriOS"),$.fn.imgResize=function(e){var n,a,t,i,s,o,r,u,d,l,c,m;return e=$.extend({parent:$(this).parent()},e),u=$(e.parent).width(),r=$(e.parent).height(),a=$(this),o=a.width(),t=a.height(),l=u/o,d=r/t,n=Math.max(l,d),m=Math.floor(o*n),c=Math.floor(t*n),s=Math.floor((c-r)/-2),i=Math.floor((m-u)/-2),a.css({width:m,height:c,top:s,left:i})},$.fn.boxResize=function(e){var n,a,t,i;return e=$.extend({parent:$(this).parent(),scaleWidth:1,scaleHeight:1},e),a=$(e.parent).width(),n=$(e.parent).height(),i=e.scaleWidth,t=e.scaleHeight,$(this).css({width:a*i,height:n*t})},e=function(){return $("#js-backtop").click(function(){return $("html, body").stop().animate({scrollTop:0},1e3,"swing")})},l=function(){var e;return e=$("#js-progressbar"),d&&$.preload({forward:$.pjax.follow,check:$.pjax.getCache,encode:!0,ajax:{success:function(e,n,a){return!$.pjax.getCache(this.url)&&$.pjax.setCache(this.url,null,n,a)}}}),$.pjax({area:"#js-pjaxArea",wait:0,load:{head:"base, meta, link"},cache:{click:!0,submit:!1,popstate:!0},server:{query:null},speedcheck:!0,fallback:!0,ajax:{timeout:5e3},callbacks:{update:{content:{after:function(){return e.css({width:"70%"})}},css:{after:function(){return e.css({width:"80%"})}},script:{after:function(){return e.css({width:"90%"})}}}}}),$(document).on("pjax:fetch",function(){return e.removeClass("is-hidden").css({width:"20%"})}),$(window).on("pjax:unload",function(){return e.css({width:"40%"}),$(window).off("load"),$(window).off("resize"),$(document).off("imagesLoades",$("#js-mainvisual-image"))}),$(document).on("pjax:DOMContentLoaded",function(){var e;return e=$("#js-pjaxArea").attr("data-pageclass"),$("body").removeClass().addClass(e),null!==document.getElementById("js-mainvisual")&&$("body").hasClass("page-index")?$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}):void 0}),$(document).on("pjax:ready",function(){return $(document).trigger("preload")}),$(document).on("pjax:render",function(){var i,s;return e.css({width:"100%"}),setTimeout(function(){return e.addClass("is-hidden")},300),$("body").hasClass("page-single")&&n(),s=!1,$(window).on("resize",function(){return s!==!1&&clearTimeout(s),s=setTimeout(function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),o()):a()},200)}),null!==document.getElementById("js-mainvisual")?(i=$("#js-mainvisual-image").find("img"),u&&(i.attr("src",i.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),$("#js-mainvisual-image").imagesLoaded().done(function(){return o(),t()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return a(),t()})):void 0}),$(window).on("pjax:load",function(){})},i=function(){var e;return e=e=d?"click":"touchstart",$("#js-navigation-toggle").on(e,function(){return $("body").toggleClass("is-nav-open")}),$("#js-navigation a").on("click",function(){return $("body").removeClass("is-nav-open")}),$("#js-overlay").on(e,function(){return $("body").hasClass("is-nav-open")?$("body").removeClass("is-nav-open"):void 0})},a=function(){return $("#js-mainvisual-image img").imgResize()},t=function(){return $("#js-mainvisual-image").removeClass("is-hidden"),$("#js-mainvisual-text").delay(1e3).queue(function(){return $(this).removeClass("is-hidden").dequeue()}),$("#js-mainvisual").addClass("is-loaded")},n=function(){return $("pre").addClass("prettyprint"),prettyPrint()},r=function(){return $("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1})},o=function(){return $("#js-mainvisual-image img").imgResize()},l(),e(),i(),n(),null!==document.getElementById("js-mainvisual")&&($("body").hasClass("page-index")||$("body").hasClass("single-works"))&&$("#js-mainvisual").boxResize({parent:$(window),scaleHeight:1}),null!==document.getElementById("js-mainvisual")&&(s=$("#js-mainvisual-image").find("img"),u&&(s.attr("src",s.attr("src")+"?t="+(new Date).getTime()),console.log("image timestamped")),$("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),$("#js-mainvisual-image").imagesLoaded().done(function(){return o(),t()})):$("#js-mainvisual-image").imagesLoaded().done(function(){return a(),t()})),null!==document.getElementById("js-mainvisual")?(c=!1,$(window).on("resize",function(){return c!==!1&&clearTimeout(c),c=setTimeout(function(){return $("body").hasClass("page-index")||$("body").hasClass("single-works")?(r(),o()):a()},200)})):void 0})}).call(this);