/*! jquery.pjax.js v2.1.0 | (c) 2014, falsandtru | MIT Licence */
!new function(window,document,undefined,$){"use strict";var MODULE;!function(a){a.NAME="pjax",a.NAMESPACE=jQuery,function(a){a[a.wait=-1]="wait",a[a.ready=0]="ready",a[a.lock=1]="lock",a[a.seal=2]="seal"}(a.State||(a.State={}));a.State}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(){function b(){this.NAME=a.NAME,this.NAMESPACE=a.NAMESPACE,this.state_=-1,this.GEN_UUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16).toUpperCase()})},this.stock=function b(c,d,e){if(this instanceof b)switch(typeof c){case"object":case"function":return this.uuid=a.M.GEN_UUID(),b[this.uuid]=this,jQuery.extend.apply(jQuery,[!0,this].concat([].slice.call(arguments)).concat({uuid:this.uuid}));case"string":return delete b[c]}else if("object"==typeof c){var f,g=c;for(f in g)a.Model.store(f,g[f])}else switch(arguments.length){case 0:return new this.stock;case 1:return this.stock[c]||a.Model.store(c);case 2:return a.Model.store(c,d);case 3:return a.Model.store(c,d,e)}},this.UUID=this.GEN_UUID()}return b.prototype.MAIN=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return this.main_.apply(this,[a].concat(b))},b.prototype.main_=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return this.state_=0,a},b.store=function(b,c){switch(arguments.length){case 0:break;case 1:return a.Model.store[b];case 2:return a.Model.store[b]=c;case 3:return a.Model.store[b]=jQuery.extend(!0,a.Model.store[b],c)}},b}();a.ModelTemplate=b}(MODULE||(MODULE={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MODULE;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.canonicalizeUrl=function(a){var b;return b=this.trim(a),b=b.replace(/["`^|\\<>{}\[\]\s].*/,""),b=/^https?:/i.test(b)?b:function(a,b){return b.href=a,b.href}(b,document.createElement("a")),b=encodeURI(decodeURI(b)),b=b.replace(/(?:%\w{2})+/g,function(b){return a.match(b.toLowerCase())||b})},b.prototype.trim=function(a){if(String.prototype.trim)a=a.toString().trim();else if(a=String(a).replace(/^[\s\uFEFF\xA0]+/,""))for(var b=a.length;--b;)if(/[^\s\uFEFF\xA0]/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a},b.prototype.fire=function(a,b,c,d){return"undefined"==typeof b&&(b=window),"undefined"==typeof c&&(c=[]),"undefined"==typeof d&&(d=!1),"function"==typeof a?d?setTimeout(function(){a.apply(b||window,c)},0):a.apply(b||window,c):a},b}(a.ModelTemplate);a.ModelUtil=b,a.UTIL=new b}(MODULE||(MODULE={}));var MODULE;!function(MODULE){var V,C,ModelApp=function(_super){function ModelApp(){_super.call(this),this.landing=MODULE.UTIL.canonicalizeUrl(window.location.href),this.recent={order:[],data:{},size:0},this.createHTMLDocument_()}return __extends(ModelApp,_super),ModelApp.prototype.configure=function(option,origURL,destURL,isBidirectional){"undefined"==typeof isBidirectional&&(isBidirectional=!1),origURL=MODULE.UTIL.canonicalizeUrl(origURL||option.origLocation.href),destURL=MODULE.UTIL.canonicalizeUrl(destURL||option.destLocation.href),option=option.option||option;var scope=option.scope?jQuery.extend(!0,{},option,MODULE.APP.scope_(option,origURL,destURL,null)||isBidirectional&&MODULE.APP.scope_(option,destURL,origURL,null)||{disable:!0}):jQuery.extend(!0,{},option),initial={gns:MODULE.M.NAME,ns:"",disable:!1,area:"body",link:"a:not([target])",filter:function(){return/(\/[^.]*|\.html?|\.php)$/.test("/"+this.pathname)},form:null,scope:null,state:null,scrollTop:0,scrollLeft:0,ajax:{dataType:"text"},contentType:"text/html",cache:{click:!1,submit:!1,popstate:!1,get:!0,post:!0,mix:!1,page:100,size:1048576,expires:{max:null,min:3e5}},callback:null,callbacks:{ajax:{},update:{redirect:{},url:{},title:{},head:{},content:{},scroll:{},css:{},script:{},cache:{},render:{},verify:{}}},param:null,load:{css:!1,script:!1,execute:!0,head:"base, meta, link",reload:"",ignore:'[src*="jquery.js"], [src*="jquery.min.js"], [href^="chrome-extension://"]',sync:!0,ajax:{dataType:"script",cache:!0},rewrite:null,redirect:!0},interval:100,wait:0,scroll:{delay:300},fix:{location:!0,history:!0,scroll:!0,reset:!1},hashquery:!1,fallback:!0,database:!0,speedcheck:!1,server:{query:"pjax=1",header:!0}},force={origLocation:function(a,b){return b.href=a,b}(origURL,document.createElement("a")),destLocation:function(a,b){return b.href=a,b}(destURL,document.createElement("a")),scroll:{record:!0,queue:[]},retry:!0,option:option},compute=function(){var nsArray=[setting.gns||MODULE.M.NAME].concat(setting.ns&&String(setting.ns).split(".")||[]),query=setting.server.query;switch(query&&typeof query){case"string":query=eval("({"+query.replace(/"/g,'\\"').replace(/([^?=&]+)=([^&]+)/g,'"$1": "$2"').replace(/&/g,",")+"})");case"object":query=jQuery.param(query)}return{nss:{name:setting.ns||"",array:nsArray,event:nsArray.join("."),data:nsArray.join("-"),class4html:nsArray.join("-"),click:["click"].concat(nsArray.join(":")).join("."),submit:["submit"].concat(nsArray.join(":")).join("."),popstate:["popstate"].concat(nsArray.join(":")).join("."),scroll:["scroll"].concat(nsArray.join(":")).join("."),requestHeader:["X",nsArray[0].replace(/^\w/,function(a){return a.toUpperCase()})].join("-")},fix:/touch|tablet|mobile|phone|android|iphone|ipad|blackberry/i.test(window.navigator.userAgent)?{}:{location:!1,reset:!1},contentType:setting.contentType.replace(/\s*[,;]\s*/g,"|").toLowerCase(),server:{query:query},timeStamp:(new Date).getTime()}},setting;return setting=jQuery.extend(!0,initial,scope,force),setting=jQuery.extend(!0,setting,compute()),new MODULE.APP.stock(setting)},ModelApp.prototype.registrate=function(a,b){var c=MODULE.APP.stock("executed");b.load.script&&jQuery("script").each(function(){var a=this;a="function"==typeof b.load.rewrite?MODULE.UTIL.fire(b.load.rewrite,null,[a.cloneNode(!0)])||a:a,a.src in c||!a.src||b.load.reload&&jQuery(a).is(b.load.reload)||(c[a.src]=!0)}),MODULE.DATA.openDB(b),new MODULE.View(a).BIND(b),setTimeout(function(){return MODULE.APP.landing=null},1500)},ModelApp.prototype.drive=function(a,b,c,d){function e(c){MODULE.UTIL.fire(a.callbacks.ajax.done,this,[b,a.param].concat(c))}function f(c){MODULE.UTIL.fire(a.callbacks.ajax.fail,this,[b,a.param].concat(c))}function g(d){MODULE.UTIL.fire(a.callbacks.ajax.fail,this,[b,a.param].concat(d)),MODULE.M.setActiveXHR(null);var e,f,g;2<d.length?(e=d[0],f=d[1],g=d[2],MODULE.APP.update_(a,b,c,e,f,g,null)):a.fallback&&"abort"!==d.statusText&&(g=d,"function"==typeof a.fallback?MODULE.UTIL.fire(a.fallback,null,[b,a.param,a.origLocation.href,a.destLocation.href]):MODULE.APP.fallback_(b))}var h=a.speedcheck,i=MODULE.APP.stock("speed");if(h&&(i.fire=b.timeStamp),h&&i.time.splice(0,100,0),h&&i.name.splice(0,100,"pjax("+i.time.slice(-1)+")"),MODULE.UTIL.fire(a.callbacks.before,null,[b,a.param])!==!1){a.scroll.record=!1,a.fix.reset&&/click|submit/.test(b.type.toLowerCase())&&window.scrollTo(jQuery(window).scrollLeft(),0);var j=MODULE.M.getActiveXHR();if(b=jQuery.extend(!0,{},b),d&&d.XMLHttpRequest)h&&i.name.splice(0,1,"cache("+i.time.slice(-1)+")"),MODULE.M.setActiveXHR(null),MODULE.M.isDeferrable?jQuery.when(jQuery.Deferred().resolve(d),MODULE.APP.wait_(MODULE.UTIL.fire(a.wait,null,[b,a.param,a.origLocation.href,a.destLocation.href]))).done(function(d){return MODULE.APP.update_(a,b,c,d.data,d.textStatus,d.XMLHttpRequest,d)})&&undefined:MODULE.APP.update_(a,b,c,d.data,d.textStatus,d.XMLHttpRequest,d);else if(j&&j.follow&&"abort"!==j.statusText){h&&i.time.splice(0,1,j.timeStamp-i.fire),h&&i.name.splice(0,1,"preload("+i.time.slice(-1)+")"),h&&i.time.push(i.now()-i.fire),h&&i.name.push("continue("+i.time.slice(-1)+")");var k=a.wait&&isFinite(j.timeStamp)?Math.max(a.wait-(new Date).getTime()+j.timeStamp,0):0;jQuery.when(j,MODULE.APP.wait_(k)).done(e).fail(f).always(g)}else{var l={},m={};switch(l.url=a.server.query?[a.destLocation.protocol,"//",a.destLocation.host,"/"===a.destLocation.pathname.charAt(0)?a.destLocation.pathname:"/"+a.destLocation.pathname,(1<a.destLocation.search.length?a.destLocation.search+"&":"?")+a.server.query,a.destLocation.hash].join(""):a.destLocation.href,b.type.toLowerCase()){case"click":l.type="GET";break;case"submit":l.type=b.currentTarget.method.toUpperCase(),"POST"===l.type&&(l.data=jQuery(b.currentTarget).serializeArray());break;case"popstate":l.type="GET"}var n,o;m={xhr:a.callbacks.ajax.xhr?function(){var c;return c=MODULE.UTIL.fire(a.callbacks.ajax.xhr,this,[b,a.param]),c="object"==typeof c&&c||jQuery.ajaxSettings.xhr()}:undefined,beforeSend:a.callbacks.ajax.beforeSend||a.server.header?function(c,d){a.server.header&&c.setRequestHeader(a.nss.requestHeader,"true"),"object"==typeof a.server.header&&(c.setRequestHeader(a.nss.requestHeader,"true"),a.server.header.area&&c.setRequestHeader(a.nss.requestHeader+"-Area",a.area[0]),a.server.header.head&&c.setRequestHeader(a.nss.requestHeader+"-Head",a.load.head),a.server.header.css&&c.setRequestHeader(a.nss.requestHeader+"-CSS",a.load.css.toString()),a.server.header.script&&c.setRequestHeader(a.nss.requestHeader+"-Script",a.load.script.toString())),MODULE.UTIL.fire(a.callbacks.ajax.beforeSend,this,[b,a.param,c,d])}:undefined,dataFilter:a.callbacks.ajax.dataFilter?function(c,d){return MODULE.UTIL.fire(a.callbacks.ajax.dataFilter,this,[b,a.param,c,d])||c}:undefined,success:function(c,d,e){n=c,MODULE.UTIL.fire(a.callbacks.ajax.success,this,[b,a.param,c,d,e])},error:function(c,d,e){o=e,MODULE.UTIL.fire(a.callbacks.ajax.error,this,[b,a.param,c,d,e])},complete:function(d,e){var f=n,g=o;MODULE.UTIL.fire(a.callbacks.ajax.complete,this,[b,a.param,d,e]),MODULE.M.setActiveXHR(null),g?a.fallback&&"abort"!==e&&("function"==typeof a.fallback?MODULE.UTIL.fire(a.fallback,null,[b,a.param,a.origLocation.href,a.destLocation.href]):MODULE.APP.fallback_(b)):MODULE.M.isDeferrable||MODULE.APP.update_(a,b,c,f,e,d,null)}},l=jQuery.extend(!0,{},a.ajax,m,l),h&&i.time.push(i.now()-i.fire),h&&i.name.push("request("+i.time.slice(-1)+")"),jQuery(document).trigger(a.gns+".request"),j=MODULE.M.setActiveXHR(jQuery.ajax(l)),MODULE.M.isDeferrable&&jQuery.when(j,MODULE.APP.wait_(MODULE.UTIL.fire(a.wait,null,[b,a.param,a.origLocation.href,a.destLocation.href]))).done(e).fail(f).always(g)}MODULE.UTIL.fire(a.callbacks.after,null,[b,a.param])===!1}},ModelApp.prototype.update_=function(a,b,c,d,e,f,g){a:{var h=a.speedcheck,i=MODULE.APP.stock("speed");h&&i.time.push(i.now()-i.fire),h&&i.name.push("load("+i.time.slice(-1)+")"),MODULE.M.setActiveSetting(a);var j=a.destLocation.href,k=a.callbacks.update;if(MODULE.UTIL.fire(k.before,null,[b,a.param,d,e,f,g])!==!1){if(a.cache.mix&&"popstate"!==b.type.toLowerCase()&&(new Date).getTime()-b.timeStamp<=a.cache.mix)return"function"==typeof a.fallback?MODULE.UTIL.fire(a.fallback,null,[b,a.param,a.origLocation.href,a.destLocation.href]):MODULE.APP.fallback_(b);try{if(MODULE.APP.landing=null,!g&&!~(f.getResponseHeader("Content-Type")||"").toLowerCase().search(a.contentType))throw new Error("throw: content-type mismatch");g&&g.XMLHttpRequest||!a.cache.click&&!a.cache.submit&&!a.cache.popstate||("submit"!==b.type.toLowerCase()||a.cache[b.currentTarget.method.toLowerCase()])&&MODULE.UTIL.fire(k.cache.before,null,[b,a.param,g])!==!1&&(jQuery[MODULE.M.NAME].setCache(j,g&&g.data||null,e,f),g=jQuery[MODULE.M.NAME].getCache(j),MODULE.UTIL.fire(k.cache.after,null,[b,a.param,g])!==!1);var l,m,n=MODULE.APP.createHTMLDocument_(f.responseText),o=document,p=[],q=jQuery("title",n).text();if(a.area=MODULE.APP.chooseAreas(a.area,n,o),a.area=a.area.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g),!a.area)throw new Error("throw: area notfound");if(g&&g.data){l=MODULE.APP.createHTMLDocument_(g.data),q=jQuery("title",l).text();for(var r,s,t=-1;a.area[++t];){r=jQuery(a.area[t],n).clone(),s=jQuery(a.area[t],l);for(var u=-1;r[++u];)s.eq(u).replaceWith(r.eq(u))}}h&&i.time.push(i.now()-i.fire),h&&i.name.push("parse("+i.time.slice(-1)+")"),jQuery("noscript",n).children().parent().each(function(){this.children.length&&jQuery(this).text(this.innerHTML)});var v=jQuery('head meta[http-equiv="Refresh"][content*="URL="]',n)[0];if(v&&MODULE.UTIL.fire(k.redirect.before,null,[b,a.param,d,e,f])!==!1){switch(v=jQuery("<a>",{href:jQuery(v).attr("content").match(/\w+:\/\/[^;\s]+/i)})[0],!0){case!a.load.redirect:case v.protocol!==a.destLocation.protocol:case v.host!==a.destLocation.host:case"submit"===b.type.toLowerCase()&&"GET"===b.currentTarget.method.toUpperCase():switch(b.type.toLowerCase()){case"click":case"submit":return window.location.assign(v.href);case"popstate":return window.location.replace(v.href)}default:switch(jQuery[MODULE.M.NAME].enable(),b.type.toLowerCase()){case"click":return void jQuery[MODULE.M.NAME].click(v.href);case"submit":return void 0===b.currentTarget.method.toUpperCase()?jQuery[MODULE.M.NAME].click(v):window.location.assign(v.href);case"popstate":return window.history.replaceState(window.history.state,q,v.href),c&&a.fix.location&&(jQuery[MODULE.M.NAME].disable(),window.history.back(),window.history.forward(),jQuery[MODULE.M.NAME].enable()),void jQuery(window).trigger("popstate")}}MODULE.UTIL.fire(k.redirect.after,null,[b,a.param,d,e,f])!==!1}jQuery(window).trigger(a.gns+".unload"),MODULE.UTIL.fire(k.url.before,null,[b,a.param,d,e,f])!==!1&&(c&&j!==a.origLocation.href&&window.history.pushState(MODULE.UTIL.fire(a.state,null,[b,a.param,a.origLocation.href,a.destLocation.href]),window.opera||~window.navigator.userAgent.toLowerCase().indexOf("opera")?q:o.title,j),a.origLocation.href=j,c&&a.fix.location&&(jQuery[MODULE.M.NAME].disable(),window.history.back(),window.history.forward(),jQuery[MODULE.M.NAME].enable()),MODULE.UTIL.fire(k.url.after,null,[b,a.param,d,e,f])!==!1),MODULE.UTIL.fire(k.title.before,null,[b,a.param,d,e,f])!==!1&&(o.title=q,a.database&&a.fix.history&&MODULE.APP.saveTitleToDB(j,a.hashquery,q),MODULE.UTIL.fire(k.title.after,null,[b,a.param,d,e,f])!==!1),a.database&&MODULE.DATA.updateCurrentPage(a.hashquery);var w=function(){if(MODULE.UTIL.fire(k.head.before,null,[b,a.param,d,e,f])!==!1){var c,g,h=jQuery("title"),i=[];c=jQuery("head",n).find(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script'),g=jQuery("head",o).find(a.load.head).not(a.load.ignore).not('link[rel~="stylesheet"], style, script');for(var j,l,m=0;j=c[m];m++){switch(j=o.importNode?o.importNode(j,!0):jQuery(j.outerHTML),j.tagName.toLowerCase()){case"base":l="*";break;case"link":switch(l='[rel="'+j.getAttribute("rel")+'"]',(j.getAttribute("rel")||"").toLowerCase()){case"alternate":l+="string"==typeof j.getAttribute("type")?'[type="'+j.getAttribute("type")+'"]':":not([type])"}break;case"meta":if(j.getAttribute("charset"))l="[charset]";else if(j.getAttribute("http-equiv"))l='[http-equiv="'+j.getAttribute("http-equiv")+'"]';else if(j.getAttribute("name"))l='[name="'+j.getAttribute("name")+'"]';else{if(!j.getAttribute("property"))continue;l='[property="'+j.getAttribute("property")+'"]'}break;default:l=null}if(l){for(var p=g.filter(j.tagName).filter(l),q=p.length;q--;)if(p[q].outerHTML===j.outerHTML){g=g.not(p[q]),j=null;break}j&&i.push(j)}}h.before(i),g.remove(),MODULE.UTIL.fire(k.head.after,null,[b,a.param,d,e,f])!==!1}};if(w(),h&&i.time.push(i.now()-i.fire),h&&i.name.push("head("+i.time.slice(-1)+")"),MODULE.UTIL.fire(k.content.before,null,[b,a.param,d,e,f])!==!1){jQuery(a.area).children("."+a.nss.class4html+"-check").remove(),m=jQuery("<div/>",{"class":a.nss.class4html+"-check",style:"background: none !important; display: block !important; visibility: hidden !important; position: absolute !important; top: 0 !important; left: 0 !important; z-index: -9999 !important; width: auto !important; height: 0 !important; margin: 0 !important; padding: 0 !important; border: none !important; font-size: 12px !important; text-indent: 0 !important;"}).text(a.gns);for(var r,s,t=-1;a.area[++t];){if(r=jQuery(a.area[t],n).clone().find("script").remove().end(),s=jQuery(a.area[t],o),!r[0]||!s[0]||r.length!==s.length)throw new Error("throw: area mismatch");p=a.load.sync&&jQuery.when&&p.concat(r.find("img, iframe, frame").map(function(){var a=jQuery.Deferred();return jQuery(this).one("load error",a.resolve),a}).get())||p;for(var u=-1;r[++u];)s.eq(u).replaceWith(r.eq(u)).append(m.clone())}m=jQuery(a.area.join(",")).children("."+a.nss.class4html+"-check"),jQuery(o).trigger(a.gns+".DOMContentLoaded"),MODULE.UTIL.fire(k.content.after,null,[b,a.param,d,e,f])!==!1}h&&i.time.push(i.now()-i.fire),h&&i.name.push("content("+i.time.slice(-1)+")");var x=function(c){if(MODULE.UTIL.fire(k.scroll.before,null,[b,a.param])!==!1){var d,e;switch(b.type.toLowerCase()){case"click":case"submit":d=c&&"function"==typeof a.scrollLeft?MODULE.UTIL.fire(a.scrollLeft,null,[b,a.param,a.origLocation.href,a.destLocation.href]):a.scrollLeft,d=d>=0?d:0,d=d===!1||null===d?jQuery(window).scrollLeft():parseInt(Number(d)+"",10),e=c&&"function"==typeof a.scrollTop?MODULE.UTIL.fire(a.scrollTop,null,[b,a.param,a.origLocation.href,a.destLocation.href]):a.scrollTop,e=e>=0?e:0,e=e===!1||null===e?jQuery(window).scrollTop():parseInt(Number(e)+"",10),jQuery(window).scrollTop()===e&&jQuery(window).scrollLeft()===d||window.scrollTo(d,e),c&&a.database&&a.fix.scroll&&MODULE.APP.saveScrollPositionToCacheAndDB(j,a.hashquery,d,e);break;case"popstate":c&&a.fix.scroll&&a.database&&a.scroll.record&&MODULE.APP.loadScrollPositionByCacheOrDB(j,a.hashquery)}MODULE.UTIL.fire(k.scroll.after,null,[b,a.param])===!1}},y=function(c){if(MODULE.UTIL.fire(k.render.before,null,[b,a.param])!==!1){var d=0;!function e(){m.filter(function(){return this.clientWidth||this.clientHeight||jQuery(this).is(":hidden")}).length===m.length||d>=100?z(c):m.length&&(d++,setTimeout(e,a.interval))}()}},z=function(c){function d(){jQuery(window).trigger(a.gns+".load")}h&&i.time.push(i.now()-i.fire),h&&i.name.push("renderd("+i.time.slice(-1)+")"),m.remove(),a.scroll.record=!0,"popstate"!==b.type.toLowerCase()?(MODULE.APP.scrollByHash_(a.destLocation.hash)||x(!0),setTimeout(function(){MODULE.APP.scrollByHash_(a.destLocation.hash)},300)):x(!0),jQuery(document).trigger(a.gns+".render"),MODULE.UTIL.fire(c),a.load.sync&&jQuery.when&&p[0]?jQuery.when.apply(jQuery,p).always(d):d(),h&&console.log(i.time),h&&console.log(i.name),MODULE.UTIL.fire(k.render.after,null,[b,a.param])===!1};jQuery("noscript",n).remove();var A=function(c){if(a.load.css&&MODULE.UTIL.fire(k.css.before,null,[b,a.param,d,e,f])!==!1){var l,m,p=[],q=jQuery(c).not(jQuery(a.area).find(c));g=jQuery[MODULE.M.NAME].getCache(j),m=g&&!g.css,l=g&&g.css?jQuery(g.css):jQuery(c,n).not(jQuery(a.area,n).find(c)),l=l.not(a.load.ignore),g&&g.css&&l&&l.length!==g.css.length&&(m=!0),m&&(g.css=[]);for(var r,s=0;r=l[s];s++){r=o.importNode?o.importNode(r,!0):jQuery(r.outerHTML),r="function"==typeof a.load.rewrite?MODULE.UTIL.fire(a.load.rewrite,null,[r])||r:r,m&&(g.css[s]=r);for(var t=0;q[t];t++)if(MODULE.UTIL.trim(q[t].href||q[t].innerHTML||"")===MODULE.UTIL.trim(r.href||r.innerHTML||"")){p.length&&(r=q.eq(t).prevAll(c).first(),r[0]?r.after(p):q.eq(t).before(p),p=[]),q=q.not(q[t]),t-=Number(!!t),r=null;break}r&&p.push(r)}q[0]?q.last().after(p):jQuery("head").append(p),q.not(a.load.ignore).remove(),MODULE.UTIL.fire(k.css.after,null,[b,a.param,d,e,f])!==!1&&(h&&i.time.push(i.now()-i.fire),h&&i.name.push("css("+i.time.slice(-1)+")"))}},B=function(c){if(a.load.script&&MODULE.UTIL.fire(k.script.before,null,[b,a.param,d,e,f])!==!1){var l,m,o=[];g=jQuery[MODULE.M.NAME].getCache(j),m=g&&!g.script,l=g&&g.script?jQuery(g.script):jQuery("script",n),l=l.not(a.load.ignore),g&&g.script&&l&&l.length!==g.script.length&&(m=!0),m&&(g.script=[]);for(var p,q=MODULE.APP.stock("executed"),r=0;p=l[r];r++)p="function"==typeof a.load.rewrite?MODULE.UTIL.fire(a.load.rewrite,null,[p])||p:p,m&&(g.script[r]=p),jQuery(p).is(c)&&(p.src||MODULE.UTIL.trim(p.innerHTML))&&(p.src in q||a.load.ignore&&jQuery(p).is(a.load.ignore)||(!p.src||a.load.reload&&jQuery(p).is(a.load.reload)||(q[p.src]=!0),p&&o.push(p)));for(var p,r=0;p=o[r];r++)try{p.src?jQuery.ajax(jQuery.extend(!0,{},a.ajax,a.load.ajax,{url:p.src,async:!!p.async,global:!1})):"object"==typeof p&&(!p.type||~p.type.toLowerCase().indexOf("text/javascript"))&&eval.call(window,(p.text||p.textContent||p.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/"))}catch(s){break}MODULE.UTIL.fire(k.script.after,null,[b,a.param,d,e,f])!==!1&&(h&&i.time.push(i.now()-i.fire),h&&i.name.push(("[src][defer]"===c?"defer":"script")+"("+i.time.slice(-1)+")"))}};MODULE.UTIL.fire(k.verify.before,null,[b,a.param]);var C=MODULE.UTIL.canonicalizeUrl(window.location.href).replace(/(?:%\w{2})+/g,function(a){return String(j.match(a.toLowerCase())||a)});if(j===C)a.retry=!0,new MODULE.APP.stock(a.uuid);else{if(!a.retry)throw new Error("throw: location mismatch");a.retry=!1,a.destLocation.href=C,MODULE.APP.drive(a,b,!1,a.cache[b.type.toLowerCase()]&&jQuery[MODULE.M.NAME].getCache(MODULE.UTIL.canonicalizeUrl(window.location.href)))}if(MODULE.UTIL.fire(k.verify.after,null,[b,a.param]),A('link[rel~="stylesheet"], style'),jQuery(window).one(a.gns+".rendering",function(b){b.preventDefault(),b.stopImmediatePropagation(),x(!1),jQuery(o).trigger(a.gns+".ready"),B(":not([defer]), :not([src])"),a.load.sync?y(function(){return B("[src][defer]")}):(y(),B("[src][defer]"))}).trigger(a.gns+".rendering"),MODULE.UTIL.fire(k.success,null,[b,a.param,d,e,f])===!1)break a;if(MODULE.UTIL.fire(k.complete,null,[b,a.param,d,e,f])===!1)break a;if(MODULE.UTIL.fire(a.callback,null,[b,a.param,d,e,f])===!1)break a}catch(D){if(g&&jQuery[MODULE.M.NAME].removeCache(j),MODULE.UTIL.fire(k.error,null,[b,a.param,d,e,f])===!1)break a;if(MODULE.UTIL.fire(k.complete,null,[b,a.param,d,e,f])===!1)break a;if(a.fallback)return"function"==typeof a.fallback?MODULE.UTIL.fire(a.fallback,null,[b,a.param,a.origLocation.href,a.destLocation.href]):MODULE.APP.fallback_(b)}MODULE.UTIL.fire(k.after,null,[b,a.param,d,e,f])!==!1}}},ModelApp.prototype.chooseAreas=function(a,b,c){var d,e=-1;a:for(;d=a[++e];){for(var f=d.match(/(?:[^,\(\[]+|\(.*?\)|\[.*?\])+/g),g=-1;f[++g];)if(!jQuery(f[g],b)[0]||!jQuery(f[g],c)[0])continue a;return d}},ModelApp.prototype.scope_=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r=a.scope;if(e=b.replace(/.+?\w(\/[^#?]*).*/,"$1"),f=c.replace(/.+?\w(\/[^#?]*).*/,"$1"),h=(d||f).replace(/^\//,"").replace(/([?#])/g,"/$1").split("/"),d){if(!~d.indexOf("*"))return undefined;g=[];for(var s=e.replace(/^\//,"").replace(/([?#])/g,"/$1").split("/"),t=0,u=h.length;u>t;t++)"*"===h[t]&&g.push(s[t])}for(var t=h.length+1;t--;)if(m=n=q=o=p=undefined,i=h.slice(0,t).join("/").replace(/\/([?#])/g,"$1"),i="/"+i+("/"===(d||e).charAt(i.length+1)?"/":""),i&&i in r){if("string"==typeof r[i]&&(r[i]=r[r[i]]),!r[i]||!r[i].length)return!1;for(var v=0;(j=r[i][v])&&(o!==!1&&p!==!1);v++)if("rewrite"!==j||"function"!=typeof r.rewrite||d)if("inherit"===j)n=!0;else if("string"==typeof j){if(k="!"===j.charAt(0),j=k?j.slice(1):j,l="*"===j.charAt(0),j=l?j.slice(1):j,d&&~j.indexOf("/*/"))for(var w=0,u=g.length;u>w;w++)j=j.replace("/*/","/"+g[w]+"/");if(!(!k&&o||(l?e.search(j):e.indexOf(j)))){if(k)return!1;o=!0}if(!(!k&&p||(l?f.search(j):f.indexOf(j)))){if(k)return!1;p=!0}}else"object"==typeof j&&(q=j);else{if(m=this.scope_.apply(this,[].slice.call(arguments).slice(0,-1).concat([MODULE.UTIL.fire(r.rewrite,null,[f])]))){o=p=!0;break}if(!1===m)return!1}if(o&&p)return jQuery.extend(!0,{},a,("object"==typeof m?m:q)||{});if(!n)break}},ModelApp.prototype.scrollByHash_=function(a){if(a="#"===a.charAt(0)?a.slice(1):a,!a)return!1;var b=jQuery("#"+(a?a:", [name~="+a+"]")).first();return b[0]?(isFinite(b.offset().top)&&window.scrollTo(jQuery(window).scrollLeft(),parseInt(Number(b.offset().top)+"",10)),!0):!1},ModelApp.prototype.wait_=function(a){var b=jQuery.Deferred();return a?(setTimeout(function(){b.resolve()},a),b):b.resolve()},ModelApp.prototype.fallback_=function(a){switch(a.type.toLowerCase()){case"click":window.location.assign(a.currentTarget.href);break;case"submit":a.currentTarget.submit();break;case"popstate":window.location.reload()}},ModelApp.prototype.createHTMLDocument_=function(a){function b(a){try{var b=a&&a('<html lang="en" class="html a b"><head><noscript><style>/**/</style></noscript></head><body><noscript>noscript</noscript></body></html>');return b&&jQuery("html",b).is(".html[lang=en]")&&jQuery("head>noscript",b).html()&&"noscript"===jQuery("body>noscript",b).text()}catch(c){}}"undefined"==typeof a&&(a=""),this.createHTMLDocument_=function(a){return window.DOMParser&&window.DOMParser.prototype&&(new window.DOMParser).parseFromString(a||"","text/html")},b(this.createHTMLDocument_)||(this.createHTMLDocument_=function(a){if(a=a||"",document.implementation&&document.implementation.createHTMLDocument){for(var b,c=document.implementation.createHTMLDocument(""),d=document.createElement("html"),e=(a.slice(0,1024).match(/<html ([^>]+)>/im)||[0,""])[1].match(/\w+\="[^"]*.|\w+\='[^']*.|\w+/gm)||[],f=0;b=e[f];f++)b=b.split("=",2),c.documentElement.setAttribute(b[0],b[1].replace(/^["']|["']$/g,""));d.innerHTML=a.replace(/^.*?<html[^>]*>|<\/html>.*$/gi,""),c.documentElement.removeChild(c.head),c.documentElement.removeChild(c.body);for(var g;g=d.childNodes[0];)c.documentElement.appendChild(g)}return c},b(this.createHTMLDocument_)||(this.createHTMLDocument_=function(a){if(a=a||"",document.implementation&&document.implementation.createHTMLDocument){var b=document.implementation.createHTMLDocument("");"object"==typeof b.activeElement&&(b.open(),b.write(a),b.close())}return b},b(this.createHTMLDocument_)))},ModelApp.prototype.loadTitleByDB=function(a,b){var c=MODULE.UTIL.canonicalizeUrl(MODULE.M.convertUrlToUrlKey(a,b));MODULE.DATA.loadTitle(c,b)},ModelApp.prototype.saveTitleToDB=function(a,b,c){var d=MODULE.UTIL.canonicalizeUrl(MODULE.M.convertUrlToUrlKey(a,b));MODULE.DATA.saveTitle(d,c)},ModelApp.prototype.loadScrollPositionByCacheOrDB=function(a,b){var c=MODULE.UTIL.canonicalizeUrl(MODULE.M.convertUrlToUrlKey(a,b)),d=jQuery[MODULE.M.NAME].getCache(c);d&&"number"==typeof d.scrollX?window.scrollTo(parseInt(Number(d.scrollX)+"",10),parseInt(Number(d.scrollY)+"",10)):MODULE.DATA.loadScrollPosition(c)},ModelApp.prototype.saveScrollPositionToCacheAndDB=function(a,b,c,d){var e=MODULE.UTIL.canonicalizeUrl(MODULE.M.convertUrlToUrlKey(a,b));jQuery.extend(jQuery[MODULE.M.NAME].getCache(e),{scrollX:c,scrollY:d}),MODULE.DATA.saveScrollPosition(e,c,d)},ModelApp}(MODULE.ModelTemplate);MODULE.ModelApp=ModelApp,MODULE.APP=new ModelApp}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(b){function c(){b.apply(this,arguments),this.IDBFactory=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.msIDBKeyRange}return __extends(c,b),c.prototype.openDB=function(b,c){"undefined"==typeof c&&(c=0);var d,e,f=b.gns,g=1,h=Math.floor((new Date).getTime()/864e5),i=a.DATA.IDBFactory,j=a.DATA.IDBDatabase;if(b.database=!1,i&&f&&!(c>3))try{var k=function(d){a.DATA.IDBDatabase=undefined,j&&j.close&&j.close(),i.deleteDatabase(f),d?setTimeout(function(){return void a.DATA.openDB(b,++c)},d):void a.DATA.openDB(b,++c)};g=parseInt(h-h%7+g+"",10),d=i.open(f),d.onblocked=function(){},d.onupgradeneeded=function(){var a=this.result;try{for(var c=a.objectStoreNames?a.objectStoreNames.length:0;c--;)a.deleteObjectStore(a.objectStoreNames[c]);a.createObjectStore(b.gns,{keyPath:"id",autoIncrement:!1}).createIndex("date","date",{unique:!1})}catch(d){}},d.onsuccess=function(){try{j=this.result,a.DATA.IDBDatabase=j,(e=a.DATA.createStore_())?e.get("_version").onsuccess=function(){this.result&&g!==this.result.title?k():(a.DATA.updateVersionNumber_(g),a.DATA.updateCurrentPage(b.hashquery),a.DATA.saveTitle(a.M.convertUrlToUrlKey(b.origLocation.href,b.hashquery),document.title),a.DATA.saveScrollPosition(a.M.convertUrlToUrlKey(b.origLocation.href,b.hashquery),jQuery(window).scrollLeft(),jQuery(window).scrollTop()),b.database=!0)}:k()}catch(c){k(1e3)}},d.onerror=function(){k(1e3)}}catch(l){k(1e3)}},c.prototype.createStore_=function(){for(var b=a.DATA.IDBDatabase,c=b&&b.objectStoreNames?b.objectStoreNames.length:0;c--;)if(a.M.NAME===b.objectStoreNames[c])return b&&b.transaction&&b.transaction(a.M.NAME,"readwrite").objectStore(a.M.NAME);return null},c.prototype.updateCurrentPage=function(b){var c=a.DATA.createStore_();if(c){var d=a.UTIL.canonicalizeUrl(a.M.convertUrlToUrlKey(window.location.href,b));c.put({id:"_current",title:d})}},c.prototype.updateVersionNumber_=function(b){var c=a.DATA.createStore_();c&&c.put({id:"_version",title:b})},c.prototype.accessRecord_=function(b,c){var d=a.DATA.createStore_();d&&(d.get(b).onsuccess=c)},c.prototype.loadTitle=function(b,c){a.DATA.accessRecord_(b,function(){b===a.UTIL.canonicalizeUrl(a.M.convertUrlToUrlKey(window.location.href,c))&&this.result&&this.result.title&&(document.title=this.result.title)})},c.prototype.saveTitle=function(b,c){a.DATA.accessRecord_(b,function(){this.source.put(jQuery.extend(!0,{},this.result||{},{id:b,title:c,date:(new Date).getTime()})),a.DATA.clean_()})},c.prototype.loadScrollPosition=function(b){a.DATA.accessRecord_(b,function(){this.result&&this.result.id&&b===this.result.id&&(this.source.get(b).onsuccess=function(){this.result&&isFinite(this.result.scrollX)&&isFinite(this.result.scrollY)&&window.scrollTo(parseInt(Number(this.result.scrollX)+"",10),parseInt(Number(this.result.scrollY)+"",10))})})},c.prototype.saveScrollPosition=function(b,c,d){a.DATA.accessRecord_(b,function(){this.result&&this.result.id&&b===this.result.id&&(this.source.get(b).onsuccess=function(){this.source.put(jQuery.extend(!0,{},this.result||{},{scrollX:parseInt(Number(c)+"",10),scrollY:parseInt(Number(d)+"",10)}))})})},c.prototype.clean_=function(){var b=a.DATA.createStore_();b.count().onsuccess=function(){1e3<this.result&&(b.index("date").openCursor(a.DATA.IDBKeyRange.upperBound((new Date).getTime()-2592e5)).onsuccess=function(){var a=this.result;a?(a["delete"](a.value.id),a["continue"]()):b.count().onsuccess=function(){1e3<this.result&&b.clear()}})}},c}(a.ModelTemplate);a.ModelData=b,a.DATA=new b}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(b){function c(){b.call(this),this.isDeferrable=jQuery.when&&1.6<=Number(jQuery().jquery.match(/\d+\.\d+/)),this.state_=-1}return __extends(c,b),c.prototype.main_=function(b,c){var d;switch(d=b instanceof a.NAMESPACE?"m:":"f:",d+=c?{}.toString.call(c).split(" ").pop().slice(0,-1).toLowerCase():c,d.toLowerCase()){case"m:object":case"m:undefined":break;default:return b}var e=a.APP.configure(c,window.location.href,window.location.href);return a.M.setActiveSetting(e),a.APP.stock({executed:{},speed:{fire:0,time:[],name:[],now:function(){return(new Date).getTime()}}}),"pushState"in window.history&&window.history.pushState&&jQuery(function(){a.APP.registrate(b,e),a.M.state_=~a.M.state_?a.M.state_:0}),b},c.prototype.convertUrlToUrlKey=function(a,b){return b?a:a.replace(/#.*/,"")},c.prototype.isImmediateLoadable=function(b){if(0===a.M.state_){var c,d,e=a.UTIL.canonicalizeUrl(window.location.href);switch(typeof b){case"string":d=null,c=a.UTIL.canonicalizeUrl(b);break;case"object":switch(d=b,d.type.toLowerCase()){case"click":c=a.UTIL.canonicalizeUrl(d.currentTarget.href);break;case"submit":c=a.UTIL.canonicalizeUrl(d.currentTarget.action);break;case"popstate":return!0}if(d.which>1||d.metaKey||d.ctrlKey||d.shiftKey||d.altKey)return!1}var f=jQuery("<a/>",{href:e})[0],g=jQuery("<a/>",{href:c})[0];if(f.protocol!==g.protocol||f.host!==g.host)return!1;var h=a.APP.configure(a.M.getActiveSetting(),f.href,g.href);if(!h.disable)return!h.hashquery&&g.hash&&f.href.replace(/#.*/,"")===g.href.replace(/#.*/,"")?!1:(h.area=a.UTIL.fire(h.area,null,[d,h.param,f.href,g.href]),h.area=h.area instanceof Array?h.area:[h.area],jQuery(d.currentTarget).filter(h.filter).length&&h.area[0]&&jQuery(h.area.join(","))[0]?!0:!1)}},c.prototype.getActiveSetting=function(){return a.APP.activeSetting
},c.prototype.setActiveSetting=function(b){return a.APP.activeSetting=b},c.prototype.getActiveXHR=function(){return a.APP.activeXHR},c.prototype.setActiveXHR=function(b){return a.APP.activeXHR&&a.APP.activeXHR.readyState<4&&a.APP.activeXHR.abort(),a.APP.activeXHR=b},c.prototype.CLICK=function(b){b.timeStamp=(new Date).getTime();var c=b.currentTarget,d=(jQuery(c),a.APP.configure(a.M.getActiveSetting(),window.location.href,c.href));if(!(0!==a.M.state_||d.disable||b.isDefaultPrevented()||!a.M.isImmediateLoadable(b)||d.cache.mix&&jQuery[a.M.NAME].getCache(d.destLocation.href))){d.area=a.UTIL.fire(d.area,null,[b,d.param,d.origLocation.href,d.destLocation.href]),d.area=d.area instanceof Array?d.area:[d.area],d.database&&d.scroll.record&&a.APP.saveScrollPositionToCacheAndDB(d.destLocation.href,d.hashquery,jQuery(window).scrollLeft(),jQuery(window).scrollTop());var e;return d.cache[b.type.toLowerCase()]&&(e=jQuery[a.M.NAME].getCache(d.destLocation.href)),a.APP.drive(d,b,!0,e),b.preventDefault()}},c.prototype.SUBMIT=function(b){b.timeStamp=(new Date).getTime();var c=b.currentTarget,d=(jQuery(c),a.APP.configure(a.M.getActiveSetting(),window.location.href,c.action));if(0===a.M.state_&&!d.disable&&!b.isDefaultPrevented()&&a.M.isImmediateLoadable(b)){var e=d.destLocation.href.replace(/[?#].*/,"")+("GET"===c.method.toUpperCase()?"?"+jQuery(c).serialize():"");if(d.destLocation.href=a.UTIL.canonicalizeUrl(e),(!d.cache.mix||!jQuery[a.M.NAME].getCache(d.destLocation.href))&&(d.area=a.UTIL.fire(d.area,null,[b,d.param,d.origLocation.href,d.destLocation.href]),d.area=d.area instanceof Array?d.area:[d.area],d.area[0]&&jQuery(d.area.join(","))[0])){d.database&&d.scroll.record&&a.APP.saveScrollPositionToCacheAndDB(d.destLocation.href,d.hashquery,jQuery(window).scrollLeft(),jQuery(window).scrollTop());var f;return d.cache[b.type.toLowerCase()]&&d.cache[c.method.toLowerCase()]&&(f=jQuery[a.M.NAME].getCache(d.destLocation.href)),a.APP.drive(d,b,!0,f),b.preventDefault()}}},c.prototype.POPSTATE=function(b){b.timeStamp=(new Date).getTime();var c=a.APP.configure(a.M.getActiveSetting(),null,window.location.href,!0);if(!(a.APP.landing&&a.APP.landing===a.UTIL.canonicalizeUrl(window.location.href)||0!==a.M.state_||c.disable||b.isDefaultPrevented()||c.origLocation.href===c.destLocation.href||c.origLocation.hash!==c.destLocation.hash&&c.origLocation.pathname+c.origLocation.search===c.destLocation.pathname+c.destLocation.search&&!c.hashquery||c.cache.mix&&jQuery[a.M.NAME].getCache(c.destLocation.href)||(c.area=a.UTIL.fire(c.area,null,[b,c.param,c.origLocation.href,c.destLocation.href]),c.area=c.area instanceof Array?c.area:[c.area],!c.area[0]||!jQuery(c.area.join(","))[0]))){c.database&&c.fix.history&&a.APP.loadTitleByDB(c.destLocation.href,c.hashquery);var d;return c.cache[b.type.toLowerCase()]&&(d=jQuery[a.M.NAME].getCache(c.destLocation.href)),a.APP.drive(c,b,!1,d),b.preventDefault()}},c.prototype.SCROLL=function(b){var c=a.M.getActiveSetting();if(0===a.M.state_&&!b.isDefaultPrevented())if(c.scroll.delay){for(var d;d=c.scroll.queue.shift();)clearTimeout(d);d=setTimeout(function(){for(;d=c.scroll.queue.shift();)clearTimeout(d);c.scroll.record&&a.APP.saveScrollPositionToCacheAndDB(window.location.href,c.hashquery,jQuery(window).scrollLeft(),jQuery(window).scrollTop())},c.scroll.delay),c.scroll.queue.push(d)}else c.scroll.record&&a.APP.saveScrollPositionToCacheAndDB(window.location.href,c.hashquery,jQuery(window).scrollLeft(),jQuery(window).scrollTop())},c.prototype.enable=function(){a.M.state_=0},c.prototype.disable=function(){a.M.state_=1},c.prototype.getCache=function(b){var c=a.M.getActiveSetting(),d=a.APP.recent;if(!c||!d)return!1;var e=a.UTIL.canonicalizeUrl(b);return b=null,e=c.hashquery?e:e.replace(/#.*/,""),d.data[e]&&(new Date).getTime()>d.data[e].expires&&jQuery[a.M.NAME].removeCache(e),d.data[e]&&!d.data[e].data&&!d.data[e].XMLHttpRequest&&jQuery[a.M.NAME].removeCache(e),d.data[e]},c.prototype.setCache=function(b,c,d,e){var f=a.M.getActiveSetting(),g=a.APP.recent;if(!f||!g)return this;var h,i,j,k,l=a.UTIL.canonicalizeUrl(b);b=null,l=f.hashquery?l:l.replace(/#.*/,""),g.order.unshift(l);for(var m,n=1;m=g.order[n];n++)l===m&&g.order.splice(n,1);if(g.size>f.cache.size&&a.M.cleanCache(),h=jQuery[a.M.NAME].getCache(l),c||e||h&&(h.data||h.XMLHttpRequest)){var o=(e||{}).responseText||"";if(i=parseInt(1.8*o.length+""||"1048576",10),j=(new Date).getTime(),k=function(a){{var b;f.cache.expires}return f.cache.expires?g.data[l]&&!e?g.data[l].expires:(e&&(/no-store|no-cache/.test(e.getResponseHeader("Cache-Control"))||(b=~String(b=e.getResponseHeader("Cache-Control")).indexOf("max-age=")?1e3*b.match(/max-age=(\d+)/)[1]:(b=e.getResponseHeader("Expires"))?new Date(b).getTime()-(new Date).getTime():Number(f.cache.expires))),b=Math.max(b,0)||0,b="object"==typeof f.cache.expires&&"number"==typeof f.cache.expires.min?Math.max(f.cache.expires.min,b):b,b="object"==typeof f.cache.expires&&"number"==typeof f.cache.expires.max?Math.min(f.cache.expires.max,b):b,a+b):0}(j),g.size=g.size||0,g.size+=g.data[l]?0:i,g.data[l]=jQuery.extend(!0,{},h,{XMLHttpRequest:e,textStatus:d,data:c,size:i,expires:k,scrollX:null,scrollY:null,timeStamp:j}),g.data[l].data||g.data[l].XMLHttpRequest||jQuery[a.M.NAME].removeCache(l),e||h&&h.XMLHttpRequest){var p=((e||h&&h.XMLHttpRequest).responseText||"").slice(0,1e4).match(/<title[^>]*>(.*?)<\/title>/i).pop()||"";f.database&&f.fix.history&&a.APP.saveTitleToDB(l,f.hashquery,p)}}},c.prototype.removeCache=function(b){var c=a.M.getActiveSetting(),d=a.APP.recent;if(c&&d){var e=a.UTIL.canonicalizeUrl(b);b=null,e=c.hashquery?e:e.replace(/#.*/,"");for(var f,g=0;f=d.order[g];g++)e===f&&(d.order.splice(g,1),d.size-=d.data[f].size,d.data[f]=null,delete d.data[f])}},c.prototype.clearCache=function(){var b=a.M.getActiveSetting(),c=a.APP.recent;if(b&&c)for(var d,e=c.order.length;d=c.order[--e];)c.order.splice(e,1),c.size-=c.data[d].size,delete c.data[d]},c.prototype.cleanCache=function(){var b=a.M.getActiveSetting(),c=a.APP.recent;if(b&&c)for(var d,e=c.order.length;d=c.order[--e];)(e>=b.cache.page||d in c.data&&(new Date).getTime()>c.data[d].expires)&&(c.order.splice(e,1),c.size-=c.data[d].size,delete c.data[d])},c}(a.ModelTemplate);a.ModelMain=b,a.Model=b,a.M=new a.Model}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(){function b(b){switch(this.state_=-1,this.queue_=[],this.HANDLERS={},this.UUID=a.M.GEN_UUID(),arguments.length){case 0:break;case 1:this.CONTEXT=b,this.OBSERVE()}this.state_=0}return b.prototype.OBSERVE=function(){},b.prototype.RELEASE=function(){},b.prototype.BIND=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return this.UNBIND(),this},b.prototype.UNBIND=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return this},b.EVENTS={},b.TRIGGERS={},b}();a.ViewTemplate=b}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(b){function c(){b.apply(this,arguments),this.HANDLERS={CLICK:function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.C.CLICK.apply(a.C,b)},SUBMIT:function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.C.SUBMIT.apply(a.C,b)},POPSTATE:function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.C.POPSTATE.apply(a.C,b)},SCROLL:function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.C.SCROLL.apply(a.C,b)}}}return __extends(c,b),c.prototype.BIND=function(a){return this.UNBIND(a),this.CONTEXT.delegate(a.link,a.nss.click,this.HANDLERS.CLICK).delegate(a.form,a.nss.submit,this.HANDLERS.SUBMIT),jQuery(window).bind(a.nss.popstate,this.HANDLERS.POPSTATE),a.fix.scroll&&jQuery(window).bind(a.nss.scroll,this.HANDLERS.SCROLL),this},c.prototype.UNBIND=function(a){return this.CONTEXT.undelegate(a.link,a.nss.click).undelegate(a.form,a.nss.submit),jQuery(window).unbind(a.nss.popstate),a.fix.scroll&&jQuery(window).unbind(a.nss.scroll),this},c.prototype.OBSERVE=function(){return this.RELEASE(),this},c.prototype.RELEASE=function(){return this},c.EVENTS={CHANGE:a.M.NAME+".change"},c.TRIGGERS={},c}(a.ViewTemplate);a.ViewMain=b,a.View=b,a.V=new a.View}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(){function b(){this.state_=-1,this.HANDLERS={},this.UUID=a.M.GEN_UUID(),a.M.NAMESPACE[a.M.NAME]=a.M.NAMESPACE&&a.M.NAMESPACE==a.M.NAMESPACE.window?this.EXEC:a.M.NAMESPACE.prototype[a.M.NAME]=this.EXEC;var b="function"==typeof a.ControllerFunction&&new a.ControllerFunction||a.ControllerFunction;this.REGISTER_FUNCTIONS(a.M.NAMESPACE[a.M.NAME],b),this.UPDATE_PROPERTIES(a.M.NAMESPACE[a.M.NAME],b),this.OBSERVE(),this.state_=0}return b.prototype.EXTEND=function(b){b===a.M.NAMESPACE||a.M.NAMESPACE&&a.M.NAMESPACE==a.M.NAMESPACE.window?b=a.M.NAMESPACE[a.M.NAME]:b instanceof a.M.NAMESPACE&&b instanceof jQuery&&(b=b.add());var c="function"==typeof a.ControllerFunction&&new a.ControllerFunction||a.ControllerFunction,d="function"==typeof a.ControllerMethod&&new a.ControllerMethod||a.ControllerMethod;return this.REGISTER_FUNCTIONS(b,c),this.REGISTER_FUNCTIONS(b,d),this.UPDATE_PROPERTIES(b,c),this.UPDATE_PROPERTIES(b,d),b},b.prototype.EXEC=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];var d=a.C.EXTEND(this);return b=[d].concat(b),b=a.C.exec_.apply(a.C,b),b=b instanceof Array?b:[b],a.M.MAIN.apply(a.M,b)},b.prototype.exec_=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];return[a].concat(b)},b.prototype.REGISTER_FUNCTIONS=function(b,c){{var d;a.Controller.PROPERTIES}for(d in c)b[d]=c[d];return b},b.prototype.UPDATE_PROPERTIES=function(b,c){var d,e,f,g=a.Controller.PROPERTIES;for(d=0,e=g.length;e>d;d++)f=g[d],c[f]&&(b[f]=c[f].call(b));return b},b.prototype.OBSERVE=function(){},b.prototype.RELEASE=function(){},b.EVENTS={},b.FUNCTIONS={},b.METHODS={},b.PROPERTIES=[],b.TRIGGERS={},b}();a.ControllerTemplate=b}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(){function b(){}return b.prototype.enable=function(){return a.M.enable(),this},b.prototype.disable=function(){return a.M.disable(),this},b.prototype.click=function(b,c){var d,e=a.M.getActiveSetting();switch(typeof b){case"object":d=jQuery(b);break;case"string":c=c||{},c.href=b,d=jQuery("<a/>",c);break;default:return this}return d.first().bind(e.nss.click,function(b){return a.V.HANDLERS.CLICK(b)}).click().unbind(e.nss.click)},b.prototype.submit=function(b,c,d){var e,f,g,h=a.M.getActiveSetting(),i=document.createDocumentFragment();switch(!0){case"object"==typeof b:e=jQuery(b);break;case!!d:c=c||{},c.action=b,f=d instanceof Array&&Array||d instanceof Object&&Object||undefined;for(var j in d){switch(f){case Object:g=jQuery("<textarea/>",{name:j}).val(d[j]);break;case Array:d[j].attr=d[j].attr||{},d[j].attr.name=d[j].name,g=jQuery(d[j].tag.indexOf("<")?"<"+d[j].tag+"/>":d[j].tag,d[j].attr||{}).val(d[j].value);break;default:continue}i.appendChild(g[0])}e=jQuery("<form/>",c).append(i);break;default:return this}return e.first().bind(h.nss.submit,function(b){return a.V.HANDLERS.SUBMIT(b)}).submit().unbind(h.nss.submit)},b.prototype.getCache=function(b){return"undefined"==typeof b&&(b=window.location.href),a.M.getCache(b)},b.prototype.setCache=function(b,c,d,e){switch("undefined"==typeof b&&(b=window.location.href),arguments.length){case 0:return this.setCache(b,document.documentElement.outerHTML);case 1:return this.setCache(b,null);case 2:case 3:case 4:default:a.M.setCache(b,c,d,e)}return this},b.prototype.removeCache=function(b){return"undefined"==typeof b&&(b=window.location.href),a.M.removeCache(b),this},b.prototype.clearCache=function(){return a.M.clearCache(),this},b.prototype.follow=function(b,c,d){if(!a.M.isDeferrable)return!1;var e=b.currentTarget;return c.follow=!0,isFinite(b.timeStamp)&&(c.timeStamp=d||b.timeStamp),a.M.setActiveXHR(c),jQuery.when(c).done(function(){!jQuery[a.M.NAME].getCache(e.href)&&a.M.isImmediateLoadable(b)&&jQuery[a.M.NAME].setCache(e.href,undefined,undefined,c)}),jQuery[a.M.NAME].click(e.href),!0},b}();a.ControllerFunction=b}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(b){function c(){b.apply(this,arguments),this.HANDLERS={}}return __extends(c,b),c.prototype.exec_=function(b,c){b=b instanceof jQuery?b:a.C.EXTEND(jQuery(document));var d;switch(d=b instanceof a.NAMESPACE?"m:":"f:",d+=c?{}.toString.call(c).split(" ").pop().slice(0,-1).toLowerCase():c,d.toLowerCase()){case"m:undefined":c={}}return[b,c]},c.prototype.OBSERVE=function(){},c.prototype.CLICK=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.M.CLICK.apply(a.M,b)},c.prototype.SUBMIT=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.M.SUBMIT.apply(a.M,b)},c.prototype.POPSTATE=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.M.POPSTATE.apply(a.M,b)},c.prototype.SCROLL=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.M.SCROLL.apply(a.M,b)},c.EVENTS={},c.PROPERTIES=[],c.TRIGGERS={},c}(a.ControllerTemplate);a.ControllerMain=b,a.Controller=b,a.C=new a.Controller}(MODULE||(MODULE={}));var MODULE;!function(a){var b=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.ControllerFunction);a.ControllerMethod=b}(MODULE||(MODULE={}))}(window,window.document,void 0,jQuery);